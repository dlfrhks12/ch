<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="reviewCommentMapper">
	<!-- findById, findAllByRno,insert,update,delete -->
<select id="findAllByRno" resultType="reviewComment">
	select rc_no rcNo, r_no rNo, m_num mNum, rc_content rcContent,rc_date_time rcDateTime
	from reviewcomment
	where r_no = #{rNo} order by rc_no desc
</select>
<select id="findById" resultType ="reviewComment">
	select rc_no rcNo, r_no rNo, m_num mNum, rc_content rcContent,rc_date_time rcDateTime
	from reviewcomment
	where rc_no = #{rcNo} and rownum = 1
</select>
<insert id="insert">
	<selectKey keyProperty = "rcNo" resultType="int" order="BEFORE">
		select reviewcomment_seq.nextval from dual
	</selectKey>
	insert into reviewcomment(rc_no, r_no, m_num, rc_content, rc_date_time)
	values(#{rcNo},#{rNo},#{mNum},#{rcContent},sysdate)
</insert>
<update id="update">
	update reviewcomment
	<trim suffixOverrides="," prefix="set">
		<if test = "rcContent!=null">rc_content = #{rcContent},</if>
	</trim>
	where rc_no  = #{rcNo} and rownum = 1
</update>
<delete id = "delete">
	delete from reviewcomment where rc_no =#{rcNo} and rownum = 1
</delete>
</mapper>