<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="qnacomMapper">
	<!-- findAllByBno, findById, insert, update, delete -->
	<select id="findAllByqNo" resultType="qnacomment">
		select q_no qNo, qc_no qcNo, a_username aUsername, qc_content qcContent, qc_write_time qcWriteTime
		from qnacomment qc, qna q, admin a 
		where qc.q_no=q.q_no and qc.a_username=a.a_username and q_no=#{qNo} order by qc_no desc
	</select>
	<select id="findById" resultType="qnacomment">
		select q_no qNo, qc_no qcNo, a_username aUsername, qc_content qcContent,qc_write_time qcWriteTime
		from qnacomment
		where qc_no = #{cNo} and rownum = 1
	</select>
	<insert id="insert">
		<selectKey keyProperty="qcNo" resultType="int" order="BEFORE">
			select qnacomment_seq.nextval from dual
		</selectKey>
		insert into qnacomment(qc_no,q_no,a_username,qc_content,qc_write_time)
		values(#{qcNo},#{qNo},#{aUsername},#{qcContent},sysdate)
	</insert>
	<update id="update">
		update qnacomment 
		<trim suffixOverrides="," prefix="set">
			<if test="qcContent!=null">qc_content=#{qcContent},</if>
		</trim>
		where qc_no=#{qcNo} and rownum = 1
	</update>
	<delete id="delete">
		delete from qnacomment where qc_no=#{qcNo} and rownum=1
	</delete>
</mapper>












